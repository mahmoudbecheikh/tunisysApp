<app-sidebar></app-sidebar>
<div class="container">
    <div class="row">
        <div class="col-md-6">
            <h1>{{ticket?.sujet}}</h1>

            <div class="row">
                <div class="info col-sm">
                    <p>Référence : <span>{{ticket?.ref}}</span></p>
                    <p>Nom : <span>{{ticket?.nomClient}}</span></p>
                    <p>Email : <span>{{ticket?.emailClient}}</span></p>
                    <p>Tel : <span>{{ticket?.telClient}}</span></p>
                    <p>Adresse : <span>{{ticket?.adresse}}</span></p>
                    <p>Site : <span>{{ticket?.siteWeb}}</span></p>

                </div>
                <div class="info col-sm">
                    <p>Département : <span>{{ticket?.departement?.nom}}</span></p>
                    <p>Employe : <span>---</span> </p>
                    <p>Manuel : <span>{{ticket?.manuel}}</span> </p>
                    <p>Statut : <span>{{ticket?.statut}}</span></p>
                    <p>Date : <span> {{ ticket?.date | date: 'dd/MM/yyyy HH:mm:ss'}}</span></p>
                    <p>Modifié: <span> {{ ticket?.dateModif | date: 'dd/MM/yyyy HH:mm:ss'}}</span></p>

                </div>
            </div>

            <h3>Description</h3>
            <div class="row">
                <div class="col-sm desc">
                    <textarea style="word-wrap: break-word;" class="form-control" id="exampleFormControlTextarea1"
                        disabled rows="8">{{ticket?.description}}
                    </textarea>
                </div>
            </div>



            <h3>Pièce jointe</h3>
            <div class="row files">
                <div class="col-sm-2 file" *ngFor="let file of files" (click)='download(file)'>
                    <img src="../../../../assets/images/file.png">
                    <p>{{file}}</p>
                </div>
            </div>
        </div>

        <div class="col-md-6 inbox">

            <div *ngFor="let mail of mails"
                style="width:90%; margin: 2px auto;  box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px">
                <h1>{{mail.subject}}</h1>
                <p>{{mail.date | date: 'dd/MM/yyyy HH:mm:ss'}}</p>
                <p>{{mail.name}}</p>
                <p>{{mail.from}}</p>
                <div style="    word-wrap: break-word;
                " [innerHtml]="mail.body"></div>
            </div>

            <form style="width:90%; margin: 10px auto;" [formGroup]="myForm" (ngSubmit)="envoyer()">
                <input type="text" class="form-control" name="email" id="email" formControlName="email" placeholder="Destinataire">
                <input type="text" class="form-control" name="sujet" id="sujet" formControlName="sujet" placeholder="Objet">
                <div class="form-group">
                    <textarea class="form-control" formControlName="text" id="desc"
                        placeholder="Rédigez votre rapport de résolution" rows="7"></textarea>
                    <div style="margin: 5px; background: #f5f5f5" *ngFor="let file of attachements">
                        <p style="color: #0066FF;">{{file}}</p>
                    </div>
                </div>

                <input type="file" name="file" id="file" multiple (change)="uploadMultiple($event)"
                    style="visibility: hidden;display: none;">
                <input class="btn btn-primary" type="submit" [disabled]="myForm.invalid" />
                <i  class="lni lni-trash-can"></i>
                <label for="file"> <i class="lni lni-paperclip"></i></label>

            </form>

        </div>


    </div>

</div>